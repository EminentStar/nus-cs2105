\documentclass[a4paper,11pt,answers]{exam}
\usepackage{tikz}
\usepackage{hyperref}

\begin{document}
    \extraheadheight{.5in}
    \firstpageheader{\large\sf CS2105}%
    {\large\sf National University of Singapore\\ School of Computing \\
    \LARGE\sf Problem Set 8}%
    {\large\sf Semester 2 12/13}
    \firstpageheadrule
    \pagestyle{headandfoot}

    \begin{questions}

\question 
	Consider three LANs interconnected by two routers, as shown below in Figure 5.33 in the textbook 
	(Page 531).  Let's denote the router on the left in the figure is $R_1$ and the router on the right 
	as $R_2$.   Use these IP and MAC addresses:
	\begin{itemize}
		\item A: 1.1.1.2, 00-00-00-00-00-AA
		\item B: 1.1.1.3, 00-00-00-00-00-BB
		\item $R_1$, interface on Subnet 1: 1.1.1.1, 00-00-00-00-00-11
		\item $R_1$, interface on Subnet 2: 2.2.2.3, 00-00-00-00-00-33
		\item C: 2.2.2.1, 00-00-00-00-00-CC
		\item D: 2.2.2.4, 00-00-00-00-00-DD
		\item $R_2$, interface on Subnet 2: 2.2.2.2, 00-00-00-00-00-22
		\item $R_2$, interface on Subnet 3: 3.3.3.4, 00-00-00-00-00-44
		\item E: 3.3.3.1, 00-00-00-00-00-EE
		\item F: 3.3.3.2, 00-00-00-00-00-FF 
	\end{itemize}
	\begin{parts}
\part
Consider sending an IP datagram from Host E to Host B. Suppose all of the ARP tables are up to date. Enumerate all the steps the hosts, switches, and routers take to move the packets from E to B.
\part
Repeat the above problem, now assuming that the ARP table in the sending host is empty (and the other tables are up to date).
\part Suppose the router between subnets 2 and 3 is replaced by a switch. Explain how your answers to (a) and (b) will change.
\end{parts}

\begin{solution}
\include{solutions/ps8q1}
\end{solution}

\question 
Consider a hidden node topology with five nodes arranged linearly in a chain.
Give an example where collision can still happen with CSMA/CA in this topology, even if RTS/CTS is used and propagation delay is zero.  

\begin{center}
\tikzstyle{station}=[draw,circle,minimum width=.5cm,fill=gray!30]
\begin{tikzpicture}
	\node at (0,0) [draw,circle,minimum width=4cm,dotted]{};
	\node at (0,0) [station]{C};
	\node at (-1.5,0) [draw,circle,minimum width=4cm,dotted]{};
	\node at (-1.5,0) [station]{B};
	\node at (-3,0) [draw,circle,minimum width=4cm,dotted]{};
	\node at (-3,0) [station]{A};
	\node at (1.5,0) [draw,circle,minimum width=4cm,dotted]{};
	\node at (1.5,0) [station]{D};
	\node at (3,0) [draw,circle,minimum width=4cm,dotted]{};
	\node at (3,0) [station]{E};
	\end{tikzpicture}
\end{center}

\begin{solution}
\include{solutions/ps8q2}
\end{solution}

\end{questions}
\end{document}
